/*! Swipebox v1.2.9 | Constantin Saguin csag.co | MIT License | github.com/brutaldesign/swipebox */
(function(n,t,i,r){i.swipebox=function(u,f){var s,p={useCSS:!0,useSVG:!0,initialIndexOnArray:0,closeBySwipe:!0,hideBarsOnMobile:!0,hideBarsDelay:3e3,videoMaxWidth:1140,vimeoColor:"CCCCCC",beforeOpen:null,afterOpen:null,afterClose:null,loopAtEnd:!1},e=this,o=[],h,c=u.selector,w=i(c),l=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),a=l!==null||t.createTouch!==r||"ontouchstart"in n||"onmsgesturechange"in n||navigator.msMaxTouchPoints,b=!!t.createElementNS&&!!t.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,v=n.innerWidth?n.innerWidth:i(n).width(),y=n.innerHeight?n.innerHeight:i(n).height(),k='<div id="swipebox-overlay">\t\t\t\t\t<div id="swipebox-slider"><\/div>\t\t\t\t\t<div id="swipebox-caption"><\/div>\t\t\t\t\t<div id="swipebox-action">\t\t\t\t\t\t<a id="swipebox-close"><\/a>\t\t\t\t\t\t<a id="swipebox-prev"><\/a>\t\t\t\t\t\t<a id="swipebox-next"><\/a>\t\t\t\t\t<\/div>\t\t\t<\/div>';e.settings={};i.swipebox.close=function(){s.closeSlide()};i.swipebox.extend=function(){return s};e.init=function(){if(e.settings=i.extend({},p,f),i.isArray(u))o=u,s.target=i(n),s.init(e.settings.initialIndexOnArray);else i(t).on("click",c,function(n){if(n.target.parentNode.className==="slide current")return!1;i.isArray(u)||(s.destroy(),h=i(c),s.actions());o=[];var f,r,t;t||(r="data-rel",t=i(this).attr(r));t||(r="rel",t=i(this).attr(r));h=t&&t!==""&&t!=="nofollow"?w.filter("["+r+'="'+t+'"]'):i(c);h.each(function(){var t=null,r=null,n;for(i(this).attr("title")&&(t=i(this).attr("title")),n=6;n>0;n--)if(i(this).find("h"+n).length){t=i(this).find("h"+n).text();break}i(this).attr("href")&&(r=i(this).attr("href"));o.push({href:r,title:t})});f=h.index(i(this));n.preventDefault();n.stopPropagation();s.target=i(n.target);s.init(f)})};s={init:function(n){e.settings.beforeOpen&&e.settings.beforeOpen();this.target.trigger("swipebox-start");i.swipebox.isOpen=!0;this.build();this.openSlide(n);this.openMedia(n);this.preloadMedia(n+1);this.preloadMedia(n-1);e.settings.afterOpen&&e.settings.afterOpen()},build:function(){var n=this,t;i("body").append(k);n.doCssTrans()&&(i("#swipebox-slider").css({"-webkit-transition":"left 0.4s ease","-moz-transition":"left 0.4s ease","-o-transition":"left 0.4s ease","-khtml-transition":"left 0.4s ease",transition:"left 0.4s ease"}),i("#swipebox-overlay").css({"-webkit-transition":"opacity 1s ease","-moz-transition":"opacity 1s ease","-o-transition":"opacity 1s ease","-khtml-transition":"opacity 1s ease",transition:"opacity 1s ease"}),i("#swipebox-action, #swipebox-caption").css({"-webkit-transition":"0.5s","-moz-transition":"0.5s","-o-transition":"0.5s","-khtml-transition":"0.5s",transition:"0.5s"}));b&&e.settings.useSVG===!0&&(t=i("#swipebox-action #swipebox-close").css("background-image"),t=t.replace("png","svg"),i("#swipebox-action #swipebox-prev,#swipebox-action #swipebox-next,#swipebox-action #swipebox-close").css({"background-image":t}));l&&e.settings.hideBarsOnMobile===!0&&i("#swipebox-action, #swipebox-caption").hide();i.each(o,function(){i("#swipebox-slider").append('<div class="slide"><\/div>')});n.setDim();n.actions();a&&n.gesture();n.keyboard();n.animBars();n.resize()},setDim:function(){var t,r,u={};"onorientationchange"in n?n.addEventListener("orientationchange",function(){n.orientation===0?(t=v,r=y):(n.orientation===90||n.orientation===-90)&&(t=y,r=v)},!1):(t=n.innerWidth?n.innerWidth:i(n).width(),r=n.innerHeight?n.innerHeight:i(n).height());u={width:t,height:r};i("#swipebox-overlay").css(u)},resize:function(){var t=this;i(n).resize(function(){t.setDim()}).resize()},supportTransition:function(){for(var i="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" "),n=0;n<i.length;n++)if(t.createElement("div").style[i[n]]!==r)return i[n];return!1},doCssTrans:function(){if(e.settings.useCSS&&this.supportTransition())return!0},gesture:function(){var n=this,s=null,r=null,u=!1,h=10,l=50,f={},o={},c=i("#swipebox-caption, #swipebox-action"),t=i("#swipebox-slider");c.addClass("visible-bars");n.setTimeout();i("body").bind("touchstart",function(n){return i(this).addClass("touching"),o=n.originalEvent.targetTouches[0],f.pageX=n.originalEvent.targetTouches[0].pageX,f.pageY=n.originalEvent.targetTouches[0].pageY,i(".touching").bind("touchmove",function(n){if(n.preventDefault(),n.stopPropagation(),o=n.originalEvent.targetTouches[0],e.settings.closeBySwipe&&(r=o.pageY-f.pageY,Math.abs(r)>=l||u)){var i=.75-Math.abs(r)/t.height();t.css({top:r+"px"});t.css({opacity:i});u=!0}}),!1}).bind("touchend",function(l){if(l.preventDefault(),l.stopPropagation(),e.settings.closeBySwipe){if(t.css("opacity")<=.5){var a=r>0?t.height():-t.height();t.animate({top:a+"px",opacity:0},300,function(){n.closeSlide()})}else t.animate({top:0,opacity:1},300);if(u){u=!1;return}}s=o.pageX-f.pageX;s>=h?n.getPrev():s<=-h?n.getNext():c.hasClass("visible-bars")?(n.clearTimeout(),n.hideBars()):(n.showBars(),n.setTimeout());i(".touching").off("touchmove").removeClass("touching")})},setTimeout:function(){if(e.settings.hideBarsDelay>0){var t=this;t.clearTimeout();t.timeout=n.setTimeout(function(){t.hideBars()},e.settings.hideBarsDelay)}},clearTimeout:function(){n.clearTimeout(this.timeout);this.timeout=null},showBars:function(){var n=i("#swipebox-caption, #swipebox-action");this.doCssTrans()?n.addClass("visible-bars"):(i("#swipebox-caption").animate({top:0},500),i("#swipebox-action").animate({bottom:0},500),setTimeout(function(){n.addClass("visible-bars")},1e3))},hideBars:function(){var n=i("#swipebox-caption, #swipebox-action");this.doCssTrans()?n.removeClass("visible-bars"):(i("#swipebox-caption").animate({top:"-50px"},500),i("#swipebox-action").animate({bottom:"-50px"},500),setTimeout(function(){n.removeClass("visible-bars")},1e3))},animBars:function(){var n=this,t=i("#swipebox-caption, #swipebox-action");t.addClass("visible-bars");n.setTimeout();i("#swipebox-slider").click(function(){t.hasClass("visible-bars")||(n.showBars(),n.setTimeout())});i("#swipebox-action").hover(function(){n.showBars();t.addClass("visible-bars");n.clearTimeout()},function(){e.settings.hideBarsDelay>0&&(t.removeClass("visible-bars"),n.setTimeout())})},keyboard:function(){var t=this;i(n).bind("keyup",function(n){n.preventDefault();n.stopPropagation();n.keyCode===37?t.getPrev():n.keyCode===39?t.getNext():n.keyCode===27&&t.closeSlide()})},actions:function(){var n=this,t="touchend click";o.length<2?i("#swipebox-prev, #swipebox-next").hide():(i("#swipebox-prev").bind(t,function(t){t.preventDefault();t.stopPropagation();n.getPrev();n.setTimeout()}),i("#swipebox-next").bind(t,function(t){t.preventDefault();t.stopPropagation();n.getNext();n.setTimeout()}));i("#swipebox-close").bind(t,function(){n.closeSlide()})},setSlide:function(n,t){t=t||!1;var r=i("#swipebox-slider");this.doCssTrans()?r.css({left:-n*100+"%"}):r.animate({left:-n*100+"%"});i("#swipebox-slider .slide").removeClass("current");i("#swipebox-slider .slide").eq(n).addClass("current");this.setTitle(n);t&&r.fadeIn();i("#swipebox-prev, #swipebox-next").removeClass("disabled");n===0?i("#swipebox-prev").addClass("disabled"):n===o.length-1&&e.settings.loopAtEnd!=!0&&i("#swipebox-next").addClass("disabled")},openSlide:function(t){i("html").addClass("swipebox-html");a&&i("html").addClass("swipebox-touch");i(n).trigger("resize");this.setSlide(t,!0)},preloadMedia:function(n){var t=this,i=null;o[n]!==r&&(i=o[n].href);t.isVideo(i)?t.openMedia(n):setTimeout(function(){t.openMedia(n)},1e3)},openMedia:function(n){var u=this,t=null;if(o[n]!==r&&(t=o[n].href),n<0||n>=o.length)return!1;u.isVideo(t)?i("#swipebox-slider .slide").eq(n).html(u.getVideo(t)):u.loadMedia(t,function(){i("#swipebox-slider .slide").eq(n).html(this)})},setTitle:function(n){var t=null;i("#swipebox-caption").empty();o[n]!==r&&(t=o[n].title);t&&i("#swipebox-caption").append(t)},isVideo:function(n){if(n&&(n.match(/youtube\.com\/watch\?v=([a-zA-Z0-9\-_]+)/)||n.match(/vimeo\.com\/([0-9]*)/)||n.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||n.toLowerCase().indexOf("swipeboxvideo=1")>=0))return!0},getVideo:function(n){var i="",r=n.match(/watch\?v=([a-zA-Z0-9\-_]+)/),t=n.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/),u=n.match(/vimeo\.com\/([0-9]*)/);return r||t?(t&&(r=t),i='<iframe width="560" height="315" src="//www.youtube.com/embed/'+r[1]+'" frameborder="0" allowfullscreen><\/iframe>'):u&&(i='<iframe width="560" height="315"  src="//player.vimeo.com/video/'+u[1]+"?byline=0&amp;portrait=0&amp;color="+e.settings.vimeoColor+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen><\/iframe>'),t||t||u||(i='<iframe width="560" height="315" src="'+n+'" frameborder="0" allowfullscreen><\/iframe>'),'<div class="swipebox-video-container" style="max-width:'+e.settings.videomaxWidth+'px"><div class="swipebox-video">'+i+"<\/div><\/div>"},loadMedia:function(n,t){if(!this.isVideo(n)){var r=i("<img>").on("load",function(){t.call(r)});r.attr("src",n)}},getNext:function(){var t=this,n=i("#swipebox-slider .slide").index(i("#swipebox-slider .slide.current")),r;n+1<o.length?(r=i("#swipebox-slider .slide").eq(n).contents().find("iframe").attr("src"),i("#swipebox-slider .slide").eq(n).contents().find("iframe").attr("src",r),n++,t.setSlide(n),t.preloadMedia(n+1)):e.settings.loopAtEnd===!0?(r=i("#swipebox-slider .slide").eq(n).contents().find("iframe").attr("src"),i("#swipebox-slider .slide").eq(n).contents().find("iframe").attr("src",r),n=0,t.preloadMedia(n),t.setSlide(n),t.preloadMedia(n+1)):(i("#swipebox-slider").addClass("rightSpring"),setTimeout(function(){i("#swipebox-slider").removeClass("rightSpring")},500))},getPrev:function(){var n=i("#swipebox-slider .slide").index(i("#swipebox-slider .slide.current")),t;n>0?(t=i("#swipebox-slider .slide").eq(n).contents().find("iframe").attr("src"),i("#swipebox-slider .slide").eq(n).contents().find("iframe").attr("src",t),n--,this.setSlide(n),this.preloadMedia(n-1)):(i("#swipebox-slider").addClass("leftSpring"),setTimeout(function(){i("#swipebox-slider").removeClass("leftSpring")},500))},closeSlide:function(){i("html").removeClass("swipebox-html");i("html").removeClass("swipebox-touch");i(n).trigger("resize");this.destroy()},destroy:function(){i(n).unbind("keyup");i("body").unbind("touchstart");i("body").unbind("touchmove");i("body").unbind("touchend");i("#swipebox-slider").unbind();i("#swipebox-overlay").remove();i.isArray(u)||u.removeData("_swipebox");this.target&&this.target.trigger("swipebox-destroy");i.swipebox.isOpen=!1;e.settings.afterClose&&e.settings.afterClose()}};e.init()};i.fn.swipebox=function(n){if(!i.data(this,"_swipebox")){var t=new i.swipebox(this,n);this.data("_swipebox",t)}return this.data("_swipebox")}})(window,document,jQuery);
/*
//# sourceMappingURL=jquery.swipebox.min.js.map
*/